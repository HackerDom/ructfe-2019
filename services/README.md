
# Guidelines по подготовке сервисов к деплою

Пример реализации всего нижеперечисленного есть в `example_service`.

Главное:
* в папке с сервисом должен лежать `docker-compose.yaml`
* сервис должен полностью запускаться по docker-compose up
* если для сервиса нужно заранее что-то скомпилировать, то можно написать скрипт `before_image_build.sh` и положить его в папку с сервисом
* этот скрипт должен опять же в докере собрать всё необходимое для сервиса
* Если часть файлов не нужно копировать в образ, то можно создать файлик `.rsync-filter` и указать в нём правила того, что не должно копироваться

Ньюансы:
* в `example_serice/docker-compose.yaml` будут примеры того как правильно ограничивать ресурсы на запуск
* image для deploy'а должен содержать уже скомпилированный сервис, сервис из него должен стартовать мгновенно, не должен содержать ничего лишнего
