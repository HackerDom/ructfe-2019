# Patrol

There are two approaches to hacking this service: learn how to solve NP-complete problems fast enough or find the vulnerabilities. The jury does not know how to implement the first approach, so let's talk about the second.

In the legend, we are asked to find the vertex cover for a given vertex-weighted graph with a weight no greater than the specified limit without providing it directly.

The protocol of proof that I have the necessary vertex cover of the graph G consists of several iterations of this kind:
1) We send the service a graph H isomorphic to G.
2) The service requests one of:
2.1) a permutation proving the isomorphism
2.2) the vertex cover in the graph H.
3) We respond to the request.
Accordingly, there were two vulnerabilities: in checking the isomorphism and in checking the vertex cover.

## Isomorphism

In the isomorphism checker (the `checkPerm` function) the equivalence of the set of edges in the graphs G and H is checked, but nothing about the weight is. So you need to check that the limit for the graph sent to you is the same as that for the one you gave, that the `weight` array is rearranged as needed and that the permutation you received is a correct permutation.

## Vertex cover

There is also a problem with the limit check here - in checking whether the given set is the correct vertex coverage (the `checkVertexCover` function) the limit is taken from the isomorphism sent to you, and not from the graph in the service, so an additional check is needed. However, the check that a given set is a vertex cover is also incorrect. Instead of checking for vertex coverage, it checks to see if the complement to `vc` is an independent set (obviously, these are equivalent things). But the function `dfsToCheckIndependentSet` will only traverse one connected component if you run it once. Therefore, if you pass as `vc` a vertex cover for some small connected component in G (for it, the minimum vertex cover can be found using a brute force algorithm), and as `perm` a permutation where one of the component's elements is at 0, you will succeed. Checksystem generates graphs in which there are enough small components, even isolated vertices are almost always there.
